language: objective-c
osx_image: xcode10.2

install:
  - cd ./RxBus-Demo; pod update

matrix:
  include:
    - env: JOB="XCODE" DEST="OS=12.0,name=iPhone X" SCHEME="RxBus-Demo-iOS"
    - env: JOB="XCODE" DEST="arch=x86_64" SCHEME="RxBus-Demo-macOS"
    - env: JOB="XCODE" DEST="OS=11.0,name=Apple TV 4K" SCHEME="RxBus-Demo-tvOS"

script:
  - set -o pipefail
  - xcodebuild test -workspace RxBus-Demo.xcworkspace -scheme "$SCHEME" -destination "$DEST" -configuration Release ENABLE_TESTABILITY=YES | xcpretty

notifications:
  email: false
  slack:
    rooms:
      secure: "BSEYAFQCXs21zKJK4jaCcOTvFOVLlo9uLBsii0J7h5vEByuoWXbX+BaP6UTPrChhev5Z/+Jio7+X5e7u6QmRjVp98GfcnbPvF+w4yv42sW9GyksfltOPFLNrYW9zP2Ssp+3Jg76fk7p5xyN4imQRL0lAyZ3Z2ne/atiYKuc/CSMPmEKDomByIq+SJHtWPvqAVXiv0cJzJ9V+ASDWiv/3Qy5rOzfpmwUl2rfMexSU4r5No7fSOnf8GdCqw7NrwhdN2AaRtPuWbiy51Gsmx6FyfS2KPozJhC92HGwHNNQqSYTKQWjkILiLx1TPZEq0ACXpVd8el66Bww+/OQHbF74zFfbboHRw77bqQp2Cy3X2DpwiUWghiEhmlnUVisycZ5ucgLU1OF4H8xHcenC6hLxgQyM7qdOOPrXG3NdFXs1J24gVN0lcmmvL2uYEciR+xdFU3Etlf4j8L3mDwktqQyzbqv7KKTmgQhzQY0/6hRu7V5NaaDvwkkPKOSW6AAx2L90EvslypilivVvK0G4qZ6Z630B6WB2Wlh+Qds0j3L85VABZ7d1UFiChEqdiD9ekYJyP1HEbqZripEC65JwUlK7rftGyeQGl+naJpI2KJ9awZ+VZaKnMs/KGbyZgH7UT0Nx7UKVlhTJhY3LpcgknTXwOoJ8KMe4jDOEQyMQX1gSXz80="
    on_success: change

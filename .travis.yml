language: objective-c
osx_image: xcode10.2

install:
  - brew update; brew outdated swiftlint || brew upgrade swiftlint
  - cd ./RxBus-Demo; pod update

matrix:
  include:
    - env: JOB="XCODE" DEST="OS=12.0,name=iPhone X" SCHEME="RxBus-Demo-iOS"
    - env: JOB="XCODE" DEST="arch=x86_64" SCHEME="RxBus-Demo-macOS"
    - env: JOB="XCODE" DEST="OS=11.0,name=Apple TV 4K" SCHEME="RxBus-Demo-tvOS"

script:
  - set -o pipefail
  - xcodebuild test -workspace RxBus-Demo.xcworkspace -scheme "$SCHEME" -destination "$DEST" -configuration Release ENABLE_TESTABILITY=YES | xcpretty

notifications:
  email: false
  slack:
    rooms:
      secure: "E1ZYXqS5S7cS8j9YV4Ze/n4zAsAap/NTkPFU76daLNk7u5xUuFCwC9gIwdE6l8WkWsgabnXorCe/jpnsxaPeoEDfgg/G2cLdS6tLmQNAMeINT4XRpJtTaSZ9tFnMPEieIx58bYPR5eO9tDgHY5H+227guEkjmJIoS47uPCG0QxTvARmDUWlvTqwR1Sj4/1HwaHvUns3cJMziiA4Cvqh5h8SLpilnlcd8KTE/jq46+5ZTFCaovH52ZvYlxqdFhV7Ge1cocX67xFrcIF7WfzgTBmKW4S9SCpLh624yFpOoFY3Pqk0G5rtvX/ozxv/8JeM3akYndZEg8BhjUYNAYdqz6dvCQ7Lnu7Tv4h9St90ZDVxkdOUG/UvRe5fKR+scqXFM+11h62yxHbZ1FXvY4nxQMwBuCiwtmGuNA1HSRHP9E69kPw4UAXzjgpGWOgiUgCtMQXOVA9hmgWeFkAmRhZ5lPKXWJ+oXYgksINW1eRynkEn8nF9R/jxMEKkFpevrBtGy3LHgXfy7Vj1wHoa4kX4+V5tnHnM8zTRyKD2s6p1pAgV8OJuQS4VoSiDg8En01zF/pV6kBRfzadRsEPOPC1WZTl8EU0FCdlP/lGkpw0FJb0BUOFA1ZZYEuTyh/h8ImgKJvAWPoTmndM6A5IWz4wp8h9daXW16iFVMhO146yp1WpM="
    on_success: change
